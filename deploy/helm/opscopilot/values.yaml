global:
  imageTag: "dev"
  awsRegion: ""
  logLevel: "INFO"
  namespaceOverride: ""

images:
  apiRepository: "ops-copilot/api"
  webRepository: "ops-copilot/web"
  toolServerRepository: "ops-copilot/tool-server"
  pullPolicy: IfNotPresent

api:
  enabled: true
  replicaCount: 1
  service:
    type: ClusterIP
    port: 8000
  serviceAlias:
    enabled: false
    name: "api"
  containerPort: 8000
  probes:
    liveness:
      enabled: true
      path: /health
      initialDelaySeconds: 10
      periodSeconds: 10
    readiness:
      enabled: true
      path: /health
      initialDelaySeconds: 5
      periodSeconds: 5
  resources: {}
  env: {}
  secretEnv: {}
  secretRefs: []
  secrets:
    databaseUrlKey: "DATABASE_URL"
    opensearchUsernameKey: "username"
    opensearchPasswordKey: "password"

web:
  enabled: true
  replicaCount: 1
  service:
    type: ClusterIP
    port: 80
  containerPort: 80
  probes:
    liveness:
      enabled: true
      path: /
      initialDelaySeconds: 10
      periodSeconds: 10
    readiness:
      enabled: true
      path: /
      initialDelaySeconds: 5
      periodSeconds: 5
  resources: {}
  env: {}

toolServer:
  enabled: true
  replicaCount: 1
  service:
    type: ClusterIP
    port: 8080
  containerPort: 8080
  probes:
    liveness:
      enabled: true
      path: /health
      initialDelaySeconds: 10
      periodSeconds: 10
    readiness:
      enabled: true
      path: /health
      initialDelaySeconds: 5
      periodSeconds: 5
  serviceAccount:
    create: true
    name: ""
  rbac:
    create: true
    allowedNamespaces:
      - default
      - observability
  resources: {}
  env: {}
  secretEnv: {}
  secretRefs: []

ingress:
  enabled: false
  className: "alb"
  annotations: {}
  alb:
    enabled: true
    scheme: "internet-facing"
    targetType: "ip"
    sslRedirect: 443
    healthcheckPath: "/health"
    listenPortsJson: '[{"HTTP":80},{"HTTPS":443}]'
  route53:
    enabled: true
    useExternalDNS: true
    ttl: 60
  hosts:
    - host: ""
      paths:
        - path: /
          pathType: Prefix
          service: web
          port: 80
        - path: /api
          pathType: Prefix
          service: api
          port: 8000
  tls: []

imagePullSecrets: []

artifacts:
  ecr:
    imagePullSecretName: ""
  pythonPackageRegistry:
    enabled: true
    indexUrl: ""
    injectToApi: true
    injectToMigrations: true
    auth:
      secretName: ""
      tokenKey: "token"

migrations:
  enabled: true
  hook:
    enabled: true
    deletePolicy: "before-hook-creation,hook-succeeded"
    weight: "-5"
  backoffLimit: 3
  activeDeadlineSeconds: 600
  ttlSecondsAfterFinished: 300
  image:
    repository: ""
    tag: ""
    pullPolicy: ""
  command:
    - sh
    - -c
    - cd /app/migrations && alembic -c alembic.ini upgrade head
  env: {}
  secretEnv: {}
  database:
    useTerraformDatabaseSecret: true
    secretName: ""
    secretKey: "DATABASE_URL"

terraform:
  outputContractVersion: ""
  helmValues:
    global:
      awsRegion: ""
    images:
      apiRepository: ""
      webRepository: ""
      toolServerRepository: ""
    api:
      env:
        opensearchUrl: ""
        opensearchIndex: ""
      infra:
        rdsEndpoint: ""
        rdsPort: 0
        rdsDatabase: ""
    artifacts:
      pythonPackageRegistryUrl: ""
    ingress:
      domainName: ""
      tls:
        certificateArn: ""
  helmSecretRefs:
    api:
      database:
        secretName: ""
        secretArn: ""
      opensearch:
        usernameSecretName: ""
        passwordSecretName: ""
        usernameSecretArn: ""
        passwordSecretArn: ""
  dnsContract:
    ingress_domain_name: ""
    route53_hosted_zone_id: ""
    acm_certificate_arn: ""
